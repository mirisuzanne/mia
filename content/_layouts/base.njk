<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{{ [title, site.title] | join(' | ') }}</title>
    <meta name="description" content="{{ description }}" />

    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    {# <link rel="preload" href="/fonts/Recursive_VF_1.043--subset_range_english_basic.woff2" as="font" type="font/woff2" crossorigin> #}

    <meta name="color-scheme" content="dark light">

    {% for theme, color in site.theme %}
      <meta name="theme-color" media="(prefers-color-scheme: {{ theme }})" content="{{ color }}">
    {% endfor %}

    {% set styles = site.styles | concat(styles) if styles else site.styles %}
    {% for url in styles %}
      {% set url = url if '://' in url | string else ['/css/', url] | join %}
      <link rel="stylesheet" href="{{ url }}" />
    {% endfor %}

    {% include 'site/og.njk' %}
    {% include 'site/feed.njk' %}
    {% include 'site/auth.njk' %}
  </head>

  {%- import 'utility.macros.njk' as utility -%}

  <body id="miriam.codes">
    <a href="#content" class="visually-hidden">skip to content</a>

    {% if draft %}
      {% set input_path = (page.inputPath or '') | replace('./', '') %}
      <a href="{{ [site.source.repo, site.source.branch, input_path] | join }}" class="edit-draft">
        Edit this draft on GitHub
      </a>
    {% endif %}

    {% if message %}
      <div id="message">
        {{ message | md | safe }}
      </div>
    {% endif %}

    <header id="banner">
      <a href="/" rel="home" class="h-card">{{ site.title }}</a>
      {% include 'site/nav.njk' %}
    </header>

    <main id="content" tabindex="-1" {{ utility.attr_if('class', class) }}>
      {{ content | safe }}
    </main>

    {% include 'site/footer.njk' %}

    <a href="{{ page.url | url }}" class="u-url" hidden></a>

    {% set scripts = site.scripts | concat(scripts) if scripts else site.scripts %}
    {% for url in scripts %}
      {% set url = url if '://' in url | string else ['/assets/js/', url] | join %}
      <script type="text/javascript" src="{{ url | url }}"></script>
    {% endfor %}
  </body>
</html>
