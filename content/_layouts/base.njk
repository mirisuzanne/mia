<!doctype html>
<html lang="en" data-theme="auto" data-css="all" id="miriam-codes">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title if (page.url == '/') else [title, site.title] | join(' | ') }}</title>
  <meta name="description" content="{{ description }}" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  {%- include "head/theme.njk" -%}
  {%- include "head/styles.njk" -%}
  {%- include "head/preload.njk" -%}
  {%- include 'head/og.njk' -%}
  {%- include 'head/feed.njk' -%}
  {%- include 'head/auth.njk' -%}
</head>

{%- import 'utility.macros.njk' as utility -%}

<body {{ utility.show_attrs(attrs.body) }}>
  <a href="#main" class="visually-hidden">skip to content</a>

  {% if draft %}
    {% set input_path = (page.inputPath or '') | replace('./', '') %}
    <a href="{{ [site.source.repo, site.source.branch, input_path] | join }}" class="edit-draft">
      Edit this draft on GitHub
    </a>
  {% endif %}

  {% if message %}
    <div id="message">
      {{ message | md | safe }}
    </div>
  {% endif %}

  {% include 'site/nav.njk' %}
  {% include 'site/tags.njk' %}

  <main id="main" {% if erasure %}data-erase="off"{% endif %} {{ utility.show_attrs(attrs.main) }}>
    {{ content | safe }}

    <a href="{{ page.url | url }}" class="u-url" hidden></a>

    {% if rel %}
      {% set rel_attrs = {
        'reply': {'class': 'u-in-reply-to'},
        'syndication': {'class': 'u-syndication', 'rel': 'syndication'},
        'bookmark': {'class': 'u-bookmark-of'},
        'like': {'class': 'u-like-of'}
      } %}
      {% for type, target in rel %}
        <a href="{{ target | url }}" {{ utility.show_attrs(rel_attrs[type]) }} hidden></a>
      {% endfor %}
    {% endif %}
  </main>

  {% include 'site/settings.njk' %}
  {% include 'site/footer.njk' %}

  {% set scripts = meta.scripts | concat(scripts) if scripts else meta.scripts %}
  {% for url in scripts %}
    {% set url = url if '://' in url | string else ['/assets/js/', url] | join %}
    <script src="{{ url | url }}"></script>
  {% endfor %}
</body>
</html>
